<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>خدمات مكتب أور الإلكترونية</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" />

  <!-- Favicon -->
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/c/c8/Utbildningsradion_-_logo.png" type="image/png" />

  <!-- Meta Tags for Social Sharing -->
  <meta property="og:title" content="مكتب أور للخدمات الإلكترونية" />
  <meta property="og:description" content="نحن نعمل لخدمتكم على مدار الساعة" />
  <meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/c/c8/Utbildningsradion_-_logo.png" />
  <meta property="og:url" content="https://yourdomain.com" />
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body {
      height:100%;
      background: linear-gradient(135deg, #0d1b2a, #1b263b);
      font-family: 'Cairo', sans-serif;
      color: white;
      direction: rtl;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    header {
      position:fixed; top:0; left:0; right:0;
      height:50px;
      background:rgba(30,60,114,0.85);
      backdrop-filter: blur(8px);
      display:flex; align-items:center; justify-content:center;
      z-index:10;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      font-weight:700; font-size:1.3rem; letter-spacing:1.2px;
    }
    .typing-text {
      position:relative; min-width:200px; height:40px; overflow:hidden;
    }
    .typing-text span {
      position:absolute; top:0; left:0;
      opacity:0; transform:translateY(20px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      width:100%; text-align:center;
    }
    .typing-text span.active {
      opacity:1; transform:translateY(0); z‑index:1;
    }
    #buttons-container {
      margin-top:50px;
      flex:1;
      overflow-y:auto;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
    }
    .btn {
      width:100%; max-width:350px;
      padding:16px; font-size:1.2rem; font-weight:700;
      text-align:center; background:#1e3c72;
      border-radius:10px; color:white;
      cursor:pointer; transition:all .3s;
      box-shadow:0 3px 8px rgba(0,0,0,0.4);
      user-select:none; border:2px solid transparent;
    }
    .btn:hover:not(.disabled) {
      background:#5090ff;
      box-shadow:0 6px 18px #5090ffaa;
      transform:translateY(-4px);
      border-color:#aaddff;
    }
    .btn.disabled {
      background:#555; color:#aaa;
      cursor:not-allowed; box-shadow:none;
      transform:none; border-color:#777;
    }
    @media(max-width:480px){ .btn { font-size:1.1rem; padding:14px; } }
  </style>
</head>

<body>
  <header>
    <div class="typing-text" aria-live="polite" aria-atomic="true">
      <span class="active">مكتب أور</span>
      <span>للخدمات الإلكترونية</span>
      <span>نحن نعمل لخدمتكم</span>
      <span>24 ساعة</span>
    </div>
  </header>

  <div id="buttons-container"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDQES1QM4s9yDJ49hldDwI_ictXZDciPCk",
      authDomain: "ur111-824e3.firebaseapp.com",
      projectId: "ur111-824e3",
      storageBucket: "ur111-824e3.appspot.com",
      messagingSenderId: "310052619923",
      appId: "1:310052619923:web:4f3a1f37932d4ca1506f66",
      measurementId: "G-7SMM3VWNT2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const buttonsContainer = document.getElementById('buttons-container');
    const texts = document.querySelectorAll('.typing-text span');
    let current = 0;
    setInterval(() => {
      texts[current].classList.remove('active');
      current = (current + 1) % texts.length;
      texts[current].classList.add('active');
    }, 4000);

    async function loadButtonsData() {
      try {
        const docRef = doc(db, "serviceControl", "buttonsData");
        const snapshot = await getDoc(docRef);
        const data = snapshot.exists() ? snapshot.data().buttons : [];
        renderButtons(Array.isArray(data) ? data : []);
      } catch (err) {
        console.error("Firebase load error:", err);
        buttonsContainer.innerHTML = '<p style="color:lightgray;">حدث خطأ في تحميل الخدمات.</p>';
      }
    }

    function renderButtons(buttonsData) {
      buttonsContainer.innerHTML = '';
      if (!buttonsData.length) {
        buttonsContainer.innerHTML = '<p style="color:lightgray;">لا توجد خدمات حالياً.</p>';
        return;
      }
      buttonsData.forEach(btn => {
        if (!btn.active) return;
        const el = document.createElement('div');
        el.className = 'btn';
        el.textContent = btn.name || 'خدمة';
        if (btn.paused) {
          el.classList.add('disabled');
          el.onclick = e => { e.preventDefault(); alert('عذراً، هذه الخدمة مؤقتاً غير متوفرة'); };
        } else {
          el.onclick = () => btn.url && window.open(btn.url, '_blank');
        }
        buttonsContainer.appendChild(el);
      });
    }

    loadButtonsData();
  </script>
</body>
</html>
